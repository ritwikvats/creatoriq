(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[242],{350:(e,a,s)=>{"use strict";s.d(a,{A:()=>N});var t=s(77584),r=s(83868),n=s(24864),l=s.n(n),i=s(87845),c=s(9482),o=s(96775),d=s(80282),m=s(49551),x=s(92535),h=s(87255),u=s(60225),g=s(60652),p=s(15683),f=s(72660);function b(){let e=(0,i.usePathname)(),a=[{icon:c.A,label:"Dashboard",href:"/dashboard"},{icon:o.A,label:"Brand Deals",href:"/deals"},{icon:d.A,label:"YouTube",href:"/youtube"},{name:"Analytics",href:"/dashboard/analytics",icon:m.A},{name:"Audience",href:"/dashboard/audience",icon:x.A},{name:"Revenue",href:"/dashboard/revenue",icon:h.A},{name:"Tax Reports",href:"/dashboard/tax",icon:u.A},{name:"Settings",href:"/dashboard/settings",icon:g.A}],s=[{name:"YouTube",icon:d.A,connected:!0},{name:"Instagram",icon:p.A,connected:!1}];return(0,t.jsxs)("div",{className:"w-64 bg-white border-r border-gray-200 min-h-screen p-6 flex flex-col",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)(l(),{href:"/dashboard",className:"flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"w-8 h-8 text-primary-600"}),(0,t.jsx)("span",{className:"text-2xl font-bold bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent",children:"CreatorIQ"})]})}),(0,t.jsxs)("nav",{className:"flex-1 space-y-1",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Main Menu"}),a.map(a=>{let s=e===a.href;return(0,t.jsxs)(l(),{href:a.href,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all ".concat(s?"bg-primary-50 text-primary-700 font-semibold":"text-gray-700 hover:bg-gray-50 hover:text-primary-600"),children:[(0,t.jsx)(a.icon,{className:"w-5 h-5"}),a.label||a.name]},a.href)}),(0,t.jsxs)("div",{className:"pt-8",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Platforms"}),s.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(e.icon,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:e.name})]}),(0,t.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.connected?"bg-green-500":"bg-gray-300"),title:e.connected?"Connected":"Not connected"})]},e.name))]})]}),(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-sm font-bold text-primary-700",children:"RV"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:"Ritwik Vats"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"creator@example.com"})]})]}),(0,t.jsxs)(l(),{href:"/login",className:"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-red-50 hover:text-red-600 mt-2",children:[(0,t.jsx)(f.A,{className:"w-5 h-5"}),"Logout"]})]})]})}var y=s(85247),j=s(41718);function N(e){let{children:a}=e,[s,n]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"flex bg-gray-50 min-h-screen relative overflow-hidden",children:[(0,t.jsx)("div",{className:"hidden md:block",children:(0,t.jsx)(b,{})}),s&&(0,t.jsx)("div",{className:"fixed inset-0 bg-dark-900/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>n(!1)}),(0,t.jsxs)("div",{className:"fixed inset-y-0 left-0 w-72 bg-white z-50 transform transition-transform duration-300 ease-in-out md:hidden ".concat(s?"translate-x-0":"-translate-x-full"),children:[(0,t.jsx)("div",{className:"absolute top-4 right-4 text-dark-400 p-2",onClick:()=>n(!1),children:(0,t.jsx)(y.A,{className:"w-6 h-6"})}),(0,t.jsx)(b,{})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-w-0 h-screen overflow-hidden",children:[(0,t.jsxs)("header",{className:"flex md:hidden items-center justify-between px-6 py-4 bg-white border-b border-gray-100 flex-shrink-0",children:[(0,t.jsxs)(l(),{href:"/dashboard",className:"flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"w-7 h-7 text-primary-600"}),(0,t.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent",children:"CreatorIQ"})]}),(0,t.jsx)("button",{onClick:()=>n(!0),className:"p-2 text-dark-600 hover:bg-gray-50 rounded-lg",children:(0,t.jsx)(j.A,{className:"w-6 h-6"})})]}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto w-full custom-scrollbar",children:a})]})]})}},4737:(e,a,s)=>{Promise.resolve().then(s.bind(s,87648))},27895:(e,a,s)=>{"use strict";s.d(a,{U:()=>r});var t=s(78781);function r(){return(0,t.kT)("https://bbbhnymcuqwedxofdotg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiYmhueW1jdXF3ZWR4b2Zkb3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwODc5NDMsImV4cCI6MjA4NTY2Mzk0M30.W4nRAsMff-64ButFX0izvdCRIENED7OYd0vcu586RsI")}},87648:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>j});var t=s(77584),r=s(83868),n=s(350),l=s(16979),i=s(22827),c=s(87255),o=s(29287),d=s(71038);function m(e){let{deal:a,index:s}=e;return(0,t.jsx)(l.sx,{draggableId:a.id,index:s,children:(e,s)=>(0,t.jsxs)("div",{ref:e.innerRef,...e.draggableProps,...e.dragHandleProps,className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 mb-3 hover:shadow-md transition-shadow ".concat(s.isDragging?"shadow-lg ring-2 ring-primary-500 rotate-2":""),style:e.draggableProps.style,children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-800",children:a.brand_name}),(0,t.jsx)("button",{className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)(i.A,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[a.amount&&(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,t.jsx)(c.A,{className:"w-3.5 h-3.5 mr-1.5 text-green-600"}),(0,t.jsx)("span",{className:"font-medium text-green-700",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:a.currency}).format(a.amount)})]}),a.next_action_date&&(0,t.jsxs)("div",{className:"flex items-center text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded-md w-fit",children:[(0,t.jsx)(o.A,{className:"w-3 h-3 mr-1.5"}),(0,t.jsxs)("span",{children:["Action: ",new Date(a.next_action_date).toLocaleDateString()]})]}),a.contact_email&&(0,t.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,t.jsx)(d.A,{className:"w-3 h-3 mr-1.5"}),(0,t.jsx)("span",{className:"truncate max-w-[150px]",children:a.contact_email})]})]})]})})}var x=s(23377),h=s(7681);let u=[{id:"pitching",title:"Pitching"},{id:"negotiating",title:"Negotiating"},{id:"contract_sent",title:"Contract Sent"},{id:"closed_won",title:"Closed Won"},{id:"closed_lost",title:"Closed Lost"}];function g(e){let{initialDeals:a=[],userId:s}=e,[n,i]=(0,r.useState)(a),[c,o]=(0,r.useState)(!0),[d,g]=(0,r.useState)(!1),p="https://creatoriq-axxp.onrender.com";(0,r.useEffect)(()=>{g(!0),f()},[]);let f=async()=>{try{let e=await fetch("".concat(p,"/deals/").concat(s));if(e.ok){let a=await e.json();i(a)}}catch(e){console.error("Failed to fetch deals:",e)}finally{o(!1)}},b=async e=>{let{destination:a,source:s,draggableId:t}=e;if(!a||a.droppableId===s.droppableId&&a.index===s.index)return;let r=a.droppableId;i(n.map(e=>e.id===t?{...e,status:r}:e));try{await fetch("".concat(p,"/deals/").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:r})})}catch(e){console.error("Failed to update deal status:",e),f()}},y=e=>n.filter(a=>a.status===e);return d?c?(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)(x.A,{className:"w-8 h-8 animate-spin text-primary-500"})}):(0,t.jsx)("div",{className:"h-full overflow-x-auto pb-4",children:(0,t.jsx)(l.JY,{onDragEnd:b,children:(0,t.jsx)("div",{className:"flex gap-6 min-w-max h-full",children:u.map(e=>(0,t.jsxs)("div",{className:"w-80 flex flex-col h-full rounded-xl bg-gray-50/50 border border-gray-100",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-white rounded-t-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-700",children:e.title}),(0,t.jsx)("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-xs font-medium",children:y(e.id).length})]}),"pitching"===e.id&&(0,t.jsx)("button",{className:"text-gray-400 hover:text-primary-600 transition-colors",children:(0,t.jsx)(h.A,{className:"w-4 h-4"})})]}),(0,t.jsx)(l.gL,{droppableId:e.id,children:(a,s)=>(0,t.jsxs)("div",{...a.droppableProps,ref:a.innerRef,className:"flex-1 p-3 transition-colors ".concat(s.isDraggingOver?"bg-primary-50/50":""),children:[y(e.id).map((e,a)=>(0,t.jsx)(m,{deal:e,index:a},e.id)),a.placeholder]})})]},e.id))})})}):null}var p=s(85247);function f(e){let{isOpen:a,onClose:s,onCreated:n,userId:l}=e,[i,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)({brand_name:"",amount:"",currency:"INR",status:"pitching",notes:"",contact_email:""});if(!a)return null;let m=async e=>{e.preventDefault(),c(!0);try{let e=await fetch("".concat("https://creatoriq-axxp.onrender.com","/deals"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:l,brand_name:o.brand_name,amount:o.amount?parseFloat(o.amount):null,currency:o.currency,status:o.status,notes:o.notes,contact_email:o.contact_email})});if(e.ok)n(),s();else{let a=await e.json();console.error("Failed to create deal:",a),alert("Failed to create deal: ".concat(a.error||"Unknown error"))}}catch(e){console.error("Error creating deal:",e),alert("An unexpected error occurred. Please try again.")}finally{c(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-md shadow-xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-gray-800",children:"New Brand Deal"}),(0,t.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,t.jsx)(p.A,{className:"w-5 h-5"})})]}),(0,t.jsxs)("form",{onSubmit:m,className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand Name *"}),(0,t.jsx)("input",{required:!0,type:"text",placeholder:"e.g. Nike",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:o.brand_name,onChange:e=>d({...o,brand_name:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,t.jsx)("input",{type:"number",placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:o.amount,onChange:e=>d({...o,amount:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,t.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:o.currency,onChange:e=>d({...o,currency:e.target.value}),children:[(0,t.jsx)("option",{value:"INR",children:"INR (₹)"}),(0,t.jsx)("option",{value:"USD",children:"USD ($)"}),(0,t.jsx)("option",{value:"EUR",children:"EUR (€)"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stage"}),(0,t.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:o.status,onChange:e=>d({...o,status:e.target.value}),children:[(0,t.jsx)("option",{value:"pitching",children:"Pitching"}),(0,t.jsx)("option",{value:"negotiating",children:"Negotiating"}),(0,t.jsx)("option",{value:"contract_sent",children:"Contract Sent"}),(0,t.jsx)("option",{value:"closed_won",children:"Closed Won"}),(0,t.jsx)("option",{value:"closed_lost",children:"Closed Lost"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email"}),(0,t.jsx)("input",{type:"email",placeholder:"contact@brand.com",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:o.contact_email,onChange:e=>d({...o,contact_email:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,t.jsx)("textarea",{placeholder:"Any details about the deal...",rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 resize-none",value:o.notes,onChange:e=>d({...o,notes:e.target.value})})]}),(0,t.jsxs)("div",{className:"pt-2 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:bg-gray-50 rounded-lg font-medium transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-medium flex items-center gap-2 disabled:opacity-50",children:[i&&(0,t.jsx)(x.A,{className:"w-4 h-4 animate-spin"}),"Create Deal"]})]})]})]})})}var b=s(27895),y=s(87845);function j(){let[e,a]=(0,r.useState)(null),[s,l]=(0,r.useState)(!0),[i,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)(0),m=(0,y.useRouter)(),x=(0,b.U)();return((0,r.useEffect)(()=>{(async()=>{let{data:{user:e}}=await x.auth.getUser();e?a(e):m.push("/login"),l(!1)})()},[m,x]),s)?null:(0,t.jsx)(n.A,{children:(0,t.jsxs)("div",{className:"h-[calc(100vh-64px)] flex flex-col p-6 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Brand Deals"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Manage your sponsorships and partnerships"})]}),(0,t.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-medium shadow-sm",children:[(0,t.jsx)(h.A,{className:"w-4 h-4"}),"New Deal"]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden",children:e&&(0,t.jsx)(g,{userId:e.id},o)}),e&&(0,t.jsx)(f,{isOpen:i,onClose:()=>c(!1),onCreated:()=>d(e=>e+1),userId:e.id})]})})}}},e=>{e.O(0,[854,864,693,205,570,426,358],()=>e(e.s=4737)),_N_E=e.O()}]);