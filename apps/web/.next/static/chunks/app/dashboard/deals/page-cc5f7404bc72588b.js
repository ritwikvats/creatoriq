(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{7681:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(12349).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},55762:(e,t,a)=>{Promise.resolve().then(a.bind(a,67955))},67955:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(77584),l=a(83868),r=a(87845),n=a(27895),d=a(350),i=a(96775),o=a(7681),c=a(69238);function x(){let[e,t]=(0,l.useState)(null),[a,x]=(0,l.useState)(!0),[m,g]=(0,l.useState)([]),[h,u]=(0,l.useState)(!1),[p,b]=(0,l.useState)({brand_name:"",amount:"",contact_email:"",notes:""}),y=(0,r.useRouter)(),j=(0,n.U)();(0,l.useEffect)(()=>{(async()=>{let{data:{user:e}}=await j.auth.getUser();e?(t(e),f(e.id)):y.push("/login")})()},[y,j]);let f=async e=>{try{x(!0);let t=await fetch("".concat("https://creatoriq-axxp.onrender.com","/deals/").concat(e)),a=await t.json();g(a||[])}catch(e){console.error("Failed to fetch deals:",e)}finally{x(!1)}},N=async t=>{if(t.preventDefault(),e)try{(await fetch("".concat("https://creatoriq-axxp.onrender.com","/deals"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.id,...p,amount:p.amount?parseFloat(p.amount):null})})).ok&&(u(!1),b({brand_name:"",amount:"",contact_email:"",notes:""}),f(e.id))}catch(e){console.error("Failed to add deal:",e)}},v=async(t,a)=>{try{await fetch("".concat("https://creatoriq-axxp.onrender.com","/deals/").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})}),e&&f(e.id)}catch(e){console.error("Failed to update deal:",e)}},w=async t=>{if(confirm("Are you sure you want to delete this deal?"))try{await fetch("".concat("https://creatoriq-axxp.onrender.com","/deals/").concat(t),{method:"DELETE"}),e&&f(e.id)}catch(e){console.error("Failed to delete deal:",e)}},k=[{id:"pitching",title:"\uD83C\uDFAF Pitching",deals:m.filter(e=>"pitching"===e.status)},{id:"negotiating",title:"\uD83D\uDCAC Negotiating",deals:m.filter(e=>"negotiating"===e.status)},{id:"active",title:"✅ Active",deals:m.filter(e=>"active"===e.status)},{id:"completed",title:"\uD83C\uDF89 Completed",deals:m.filter(e=>"completed"===e.status)}],_=m.filter(e=>"active"===e.status||"completed"===e.status).reduce((e,t)=>e+(t.amount||0),0);return a?(0,s.jsx)(d.A,{children:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}):(0,s.jsx)(d.A,{children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-8 space-y-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold text-dark-800 flex items-center gap-2",children:[(0,s.jsx)(i.A,{className:"w-10 h-10 text-indigo-500"}),"Brand Deals"]}),(0,s.jsx)("p",{className:"text-dark-600 mt-1",children:"Track your brand partnerships & collaborations"})]}),(0,s.jsxs)("button",{onClick:()=>u(!h),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold",children:[(0,s.jsx)(o.A,{className:"w-5 h-5"}),"Add Deal"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Deals"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:m.length})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Pitching"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:k[0].deals.length})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Active"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-600",children:k[2].deals.length})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Value"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-indigo-600",children:["₹",_.toLocaleString()]})]})]}),h&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-dark-800 mb-4",children:"Add New Deal"}),(0,s.jsxs)("form",{onSubmit:N,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand Name *"}),(0,s.jsx)("input",{type:"text",value:p.brand_name,onChange:e=>b({...p,brand_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (₹)"}),(0,s.jsx)("input",{type:"number",value:p.amount,onChange:e=>b({...p,amount:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email"}),(0,s.jsx)("input",{type:"email",value:p.contact_email,onChange:e=>b({...p,contact_email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,s.jsx)("input",{type:"text",value:p.notes,onChange:e=>b({...p,notes:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),(0,s.jsxs)("div",{className:"md:col-span-2 flex gap-3",children:[(0,s.jsx)("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold",children:"Add Deal"}),(0,s.jsx)("button",{type:"button",onClick:()=>u(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold",children:"Cancel"})]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:k.map(e=>(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,s.jsxs)("h3",{className:"font-bold text-gray-800 mb-4 flex items-center justify-between",children:[e.title,(0,s.jsx)("span",{className:"text-sm bg-gray-200 px-2 py-1 rounded-full",children:e.deals.length})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[e.deals.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900",children:e.brand_name}),(0,s.jsx)("button",{onClick:()=>w(e.id),className:"text-red-500 hover:text-red-700",children:(0,s.jsx)(c.A,{className:"w-4 h-4"})})]}),e.amount&&(0,s.jsxs)("p",{className:"text-lg font-bold text-indigo-600 mb-2",children:["₹",e.amount.toLocaleString()]}),e.notes&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.notes}),e.contact_email&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:e.contact_email}),(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,s.jsxs)("select",{value:e.status,onChange:t=>v(e.id,t.target.value),className:"w-full text-xs px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 outline-none",children:[(0,s.jsx)("option",{value:"pitching",children:"Pitching"}),(0,s.jsx)("option",{value:"negotiating",children:"Negotiating"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"completed",children:"Completed"})]})})]},e.id)),0===e.deals.length&&(0,s.jsx)("p",{className:"text-center text-gray-400 text-sm py-8",children:"No deals in this stage"})]})]},e.id))})]})})}}},e=>{e.O(0,[864,693,953,570,426,358],()=>e(e.s=55762)),_N_E=e.O()}]);