(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{350:(e,t,s)=>{"use strict";s.d(t,{A:()=>N});var a=s(77584),r=s(83868),n=s(24864),l=s.n(n),i=s(87845),c=s(9482),o=s(96775),d=s(80282),m=s(49551),x=s(92535),h=s(87255),u=s(60225),g=s(60652),p=s(15683),b=s(72660);function f(){let e=(0,i.usePathname)(),t=[{icon:c.A,label:"Dashboard",href:"/dashboard"},{icon:o.A,label:"Brand Deals",href:"/deals"},{icon:d.A,label:"YouTube",href:"/youtube"},{name:"Analytics",href:"/dashboard/analytics",icon:m.A},{name:"Audience",href:"/dashboard/audience",icon:x.A},{name:"Revenue",href:"/dashboard/revenue",icon:h.A},{name:"Tax Reports",href:"/dashboard/tax",icon:u.A},{name:"Settings",href:"/dashboard/settings",icon:g.A}],s=[{name:"YouTube",icon:d.A,connected:!0},{name:"Instagram",icon:p.A,connected:!1}];return(0,a.jsxs)("div",{className:"w-64 bg-white border-r border-gray-200 min-h-screen p-6 flex flex-col",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)(l(),{href:"/dashboard",className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"w-8 h-8 text-primary-600"}),(0,a.jsx)("span",{className:"text-2xl font-bold bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent",children:"CreatorIQ"})]})}),(0,a.jsxs)("nav",{className:"flex-1 space-y-1",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Main Menu"}),t.map(t=>{let s=e===t.href;return(0,a.jsxs)(l(),{href:t.href,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all ".concat(s?"bg-primary-50 text-primary-700 font-semibold":"text-gray-700 hover:bg-gray-50 hover:text-primary-600"),children:[(0,a.jsx)(t.icon,{className:"w-5 h-5"}),t.label||t.name]},t.href)}),(0,a.jsxs)("div",{className:"pt-8",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Platforms"}),s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:e.name})]}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.connected?"bg-green-500":"bg-gray-300"),title:e.connected?"Connected":"Not connected"})]},e.name))]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-bold text-primary-700",children:"RV"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:"Ritwik Vats"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"creator@example.com"})]})]}),(0,a.jsxs)(l(),{href:"/login",className:"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-red-50 hover:text-red-600 mt-2",children:[(0,a.jsx)(b.A,{className:"w-5 h-5"}),"Logout"]})]})]})}var y=s(85247),j=s(41718);function N(e){let{children:t}=e,[s,n]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"flex bg-gray-50 min-h-screen relative overflow-hidden",children:[(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsx)(f,{})}),s&&(0,a.jsx)("div",{className:"fixed inset-0 bg-dark-900/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>n(!1)}),(0,a.jsxs)("div",{className:"fixed inset-y-0 left-0 w-72 bg-white z-50 transform transition-transform duration-300 ease-in-out md:hidden ".concat(s?"translate-x-0":"-translate-x-full"),children:[(0,a.jsx)("div",{className:"absolute top-4 right-4 text-dark-400 p-2",onClick:()=>n(!1),children:(0,a.jsx)(y.A,{className:"w-6 h-6"})}),(0,a.jsx)(f,{})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-w-0 h-screen overflow-hidden",children:[(0,a.jsxs)("header",{className:"flex md:hidden items-center justify-between px-6 py-4 bg-white border-b border-gray-100 flex-shrink-0",children:[(0,a.jsxs)(l(),{href:"/dashboard",className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"w-7 h-7 text-primary-600"}),(0,a.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent",children:"CreatorIQ"})]}),(0,a.jsx)("button",{onClick:()=>n(!0),className:"p-2 text-dark-600 hover:bg-gray-50 rounded-lg",children:(0,a.jsx)(j.A,{className:"w-6 h-6"})})]}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto w-full custom-scrollbar",children:t})]})]})}},27895:(e,t,s)=>{"use strict";s.d(t,{U:()=>r});var a=s(78781);function r(){return(0,a.kT)("https://bbbhnymcuqwedxofdotg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiYmhueW1jdXF3ZWR4b2Zkb3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwODc5NDMsImV4cCI6MjA4NTY2Mzk0M30.W4nRAsMff-64ButFX0izvdCRIENED7OYd0vcu586RsI")}},33214:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>V});var a=s(77584),r=s(83868),n=s(87845),l=s(27895),i=s(350),c=s(92535),o=s(88662),d=s(87255),m=s(49551),x=s(68478),h=s(8487);function u(e){var t,s,r;let{stats:n}=e,l=[{title:"Total Subscribers",value:(null==(t=n.subscribers)?void 0:t.toLocaleString())||"0",change:4.2,trend:"up",icon:(0,a.jsx)(c.A,{className:"w-6 h-6 text-primary-600"})},{title:"Total Views",value:(null==(s=n.totalViews)?void 0:s.toLocaleString())||"0",change:8.5,trend:"up",icon:(0,a.jsx)(o.A,{className:"w-6 h-6 text-primary-600"})},{title:"Monthly Revenue",value:"â‚¹".concat((null==(r=n.monthlyRevenue)?void 0:r.toLocaleString())||"0"),change:6.3,trend:"up",icon:(0,a.jsx)(d.A,{className:"w-6 h-6 text-primary-600"})},{title:"Engagement Rate",value:"".concat(n.engagementRate||"0","%"),change:-.5,trend:"down",icon:(0,a.jsx)(m.A,{className:"w-6 h-6 text-primary-600"})}];return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:l.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-200 hover:shadow-lg transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-3 bg-primary-50 rounded-lg",children:e.icon}),void 0!==e.change&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm font-semibold ".concat("up"===e.trend?"text-green-600":"text-red-600"),children:["up"===e.trend?(0,a.jsx)(x.A,{className:"w-4 h-4"}):(0,a.jsx)(h.A,{className:"w-4 h-4"}),Math.abs(e.change),"%"]})]}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-dark-800 mb-1",children:e.value}),(0,a.jsx)("p",{className:"text-sm text-dark-600",children:e.title})]},t))})}var g=s(11566),p=s(2519),b=s(76940),f=s(29191),y=s(84052),j=s(996),N=s(76828),v=s(23872),w=s(29287);function k(e){let{userId:t,platform:s="all",days:n=30}=e,[l,i]=(0,r.useState)([]),[c,o]=(0,r.useState)(!0),[d,m]=(0,r.useState)(n);(0,r.useEffect)(()=>{h()},[t,s,d]);let h=async()=>{try{o(!0);let e=await fetch("".concat("https://creatoriq-axxp.onrender.com","/analytics/timeline/").concat(t,"?days=").concat(d).concat("all"!==s?"&platform=".concat(s):"")),a=await e.json();if(a.snapshots&&a.snapshots.length>0){let e=u(a.snapshots);i(e)}else i([])}catch(e){console.error("Failed to fetch timeline data:",e),i([])}finally{o(!1)}},u=e=>{let t={};return e.forEach(e=>{let s=e.snapshot_date;t[s]||(t[s]={date:s}),"youtube"===e.platform?(t[s].youtube_subscribers=e.metrics.subscribers||0,t[s].youtube_views=e.metrics.total_views||0,t[s].youtube_engagement=e.metrics.avg_engagement_rate||0):"instagram"===e.platform&&(t[s].instagram_followers=e.metrics.followers||0,t[s].instagram_engagement=e.metrics.engagement_rate||0)}),Object.values(t).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())},k=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"});return c?(0,a.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-gray-100",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3"}),(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})}):0===l.length?(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-gray-100",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-dark-800 mb-4 flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"w-5 h-5 text-primary-500"}),"Growth Timeline"]}),(0,a.jsxs)("div",{className:"text-center py-12 text-dark-600",children:[(0,a.jsx)(w.A,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,a.jsx)("p",{className:"font-medium",children:"Not enough data yet"}),(0,a.jsx)("p",{className:"text-sm text-dark-500 mt-1",children:"Analytics snapshots are collected daily. Check back tomorrow to see your growth trends!"})]})]}):(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-dark-800 flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"w-5 h-5 text-primary-500"}),"Growth Timeline"]}),(0,a.jsxs)("select",{value:d,onChange:e=>m(parseInt(e.target.value)),className:"bg-gray-50 border border-gray-100 rounded-lg px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:7,children:"Last 7 Days"}),(0,a.jsx)("option",{value:14,children:"Last 14 Days"}),(0,a.jsx)("option",{value:30,children:"Last 30 Days"}),(0,a.jsx)("option",{value:90,children:"Last 90 Days"})]})]}),(0,a.jsx)(g.u,{width:"100%",height:300,children:(0,a.jsxs)(p.b,{data:l,children:[(0,a.jsx)(b.d,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(f.W,{dataKey:"date",tickFormatter:k,stroke:"#9ca3af",style:{fontSize:"12px"}}),(0,a.jsx)(y.h,{stroke:"#9ca3af",style:{fontSize:"12px"}}),(0,a.jsx)(j.m,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"},labelFormatter:e=>"Date: ".concat(k(e))}),(0,a.jsx)(N.s,{wrapperStyle:{fontSize:"12px"},iconType:"line"}),("all"===s||"youtube"===s)&&(0,a.jsx)(v.N,{type:"monotone",dataKey:"youtube_subscribers",stroke:"#ef4444",strokeWidth:2,name:"YouTube Subscribers",dot:{fill:"#ef4444",r:4},activeDot:{r:6}}),("all"===s||"instagram"===s)&&(0,a.jsx)(v.N,{type:"monotone",dataKey:"instagram_followers",stroke:"#a855f7",strokeWidth:2,name:"Instagram Followers",dot:{fill:"#a855f7",r:4},activeDot:{r:6}})]})}),l.length<3&&(0,a.jsx)("p",{className:"text-xs text-dark-500 mt-4 text-center",children:"\uD83D\uDCA1 More data points will make this chart more insightful. Snapshots are collected daily at 2 AM."})]})}var A=s(2098),S=s(23784);function C(e){let{analytics:t}=e,[s,n]=(0,r.useState)(""),[l,i]=(0,r.useState)(!1),[c,o]=(0,r.useState)("");async function m(){i(!0),o("");try{var e,t,s,a,r,l,c,d,m,x,h;let i=localStorage.getItem("token"),o=null;try{let e=await fetch("".concat("https://creatoriq-axxp.onrender.com","/instagram/analytics"),{headers:{Authorization:"Bearer ".concat(i)}});e.ok&&(o=await e.json())}catch(e){console.log("Instagram data not available")}let u=null;try{let e=await fetch("".concat("https://creatoriq-axxp.onrender.com","/youtube/analytics"),{headers:{Authorization:"Bearer ".concat(i)}});e.ok&&(u=await e.json())}catch(e){console.log("YouTube data not available")}let g={instagram:o?{followers:(null==(e=o.account)?void 0:e.followers_count)||0,posts:(null==(t=o.account)?void 0:t.media_count)||0,engagementRate:(null==(s=o.account)?void 0:s.engagement_rate)||0,avgLikes:Math.round((null==(a=o.account)?void 0:a.avg_likes)||0),avgComments:Math.round((null==(r=o.account)?void 0:r.avg_comments)||0),topPosts:(null==(l=o.topPosts)?void 0:l.slice(0,3))||[],username:(null==(c=o.account)?void 0:c.username)||""}:null,youtube:u?{subscribers:(null==(d=u.channelStats)?void 0:d.subscriberCount)||0,totalViews:(null==(m=u.channelStats)?void 0:m.totalViews)||0,totalVideos:(null==(x=u.channelStats)?void 0:x.totalVideos)||0,channelName:(null==(h=u.channelStats)?void 0:h.channelName)||""}:null},p=await fetch("".concat("https://creatoriq-axxp.onrender.com","/ai/insights"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify({analytics:g})});if(!p.ok)throw Error("Failed to generate insights");let b=await p.json();n(b.insights)}catch(e){o(e.message||"Failed to generate AI insights"),console.error("AI Error:",e)}finally{i(!1)}}return(0,a.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 to-primary-100 rounded-xl p-6 shadow-lg border border-primary-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"w-6 h-6 text-primary-600"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-dark-800",children:"AI-Powered Insights"})]}),(0,a.jsx)("span",{className:"text-xs font-semibold px-3 py-1 bg-gradient-to-r from-purple-600 to-primary-600 text-white rounded-full shadow-lg",children:"Powered by Fuelix GPT-5.2"})]}),(0,a.jsx)("p",{className:"text-dark-600 mb-4",children:"Get personalized recommendations to grow your creator business"}),!s&&!l&&(0,a.jsxs)("button",{onClick:m,disabled:l,className:"w-full py-3 px-4 bg-gradient-to-r from-primary-600 to-primary-500 text-white font-semibold rounded-lg hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[(0,a.jsx)(A.A,{className:"w-5 h-5"}),"Generate AI Insights"]}),l&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary-600 border-t-transparent rounded-full mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-dark-600 animate-pulse",children:"AI is analyzing your data..."})]}),s&&(0,a.jsxs)("div",{className:"bg-white rounded-lg p-5 shadow-md",children:[(0,a.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,a.jsx)("div",{className:"whitespace-pre-wrap text-dark-700 leading-relaxed",children:s})}),(0,a.jsxs)("button",{onClick:m,disabled:l,className:"mt-4 text-primary-600 hover:text-primary-700 font-medium text-sm flex items-center gap-1",children:[(0,a.jsx)(A.A,{className:"w-4 h-4"}),"Regenerate Insights"]})]}),c&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:[(0,a.jsx)("p",{className:"font-medium",children:"Error:"}),(0,a.jsx)("p",{className:"text-sm",children:c}),(0,a.jsx)("button",{onClick:m,className:"mt-2 text-red-600 hover:text-red-700 font-medium text-sm",children:"Try Again"})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(x.A,{className:"w-5 h-5 text-primary-500 mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-dark-600",children:"Growth Tips"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 text-primary-500 mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-dark-600",children:"Revenue Ideas"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(S.A,{className:"w-5 h-5 text-primary-500 mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-dark-600",children:"Content Suggestions"})]})]})]})}var I=s(23377),T=s(80282),R=s(55667),E=s(60589),_=s(69973);function D(e){let{onConnectionChange:t}=e,[s,n]=(0,r.useState)(!1),[l,i]=(0,r.useState)(!0),[c,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)(""),[x,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await _.api.get("/youtube/status");n(e.connected),m(e.channelName||""),h(e.lastSynced||null),t&&t(e.connected)}catch(e){console.error("Failed to check YouTube status:",e),n(!1)}finally{i(!1)}},g=async()=>{o(!0);try{let e=await _.api.get("/youtube/auth");if(e.authUrl)window.location.href=e.authUrl;else throw Error("No auth URL returned")}catch(e){console.error("Failed to start OAuth flow:",e),alert("Failed to connect. Please try again."),o(!1)}},p=async()=>{if(confirm("Are you sure you want to disconnect YouTube?")){i(!0);try{await _.api.post("/youtube/disconnect"),n(!1),m(""),h(null),t&&t(!1)}catch(e){console.error("Failed to disconnect:",e),alert("Failed to disconnect. Please try again.")}finally{i(!1)}}},b=async()=>{i(!0),await u(),i(!1)};return l?(0,a.jsxs)("div",{className:"flex items-center justify-center p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsx)(I.A,{className:"w-5 h-5 text-primary-600 animate-spin"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Checking connection..."})]}):s?(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(T.A,{className:"w-6 h-6 text-green-700"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"font-semibold text-green-900",children:"YouTube Connected"}),(0,a.jsx)(R.A,{className:"w-4 h-4 text-green-600"})]}),(0,a.jsx)("p",{className:"text-sm text-green-700",children:d}),x&&(0,a.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:["Last synced: ",new Date(x).toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:b,className:"p-2 text-green-700 hover:bg-green-100 rounded-lg transition-colors",title:"Refresh status",children:(0,a.jsx)(E.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:p,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium",children:"Disconnect"})]})]})}):(0,a.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:(0,a.jsx)(T.A,{className:"w-6 h-6 text-gray-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:"YouTube"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Not connected"})]})]}),(0,a.jsx)("button",{onClick:g,disabled:c,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.A,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.A,{className:"w-4 h-4"}),"Connect YouTube"]})})]})})}var F=s(15683);function L(e){let{onConnectionChange:t}=e,[s,n]=(0,r.useState)(!1),[l,i]=(0,r.useState)(!0),[c,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)(""),[x,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await _.api.get("/instagram/status");n(e.connected),m(e.username||""),h(e.followers||null),t&&t(e.connected)}catch(e){console.error("Failed to check Instagram status:",e),n(!1)}finally{i(!1)}},g=async()=>{o(!0);try{let e=await _.api.get("/instagram/auth");if(e.authUrl)window.location.href=e.authUrl;else throw Error("No auth URL returned")}catch(e){console.error("Failed to get auth URL:",e),alert("Failed to connect. Please try again."),o(!1)}},p=async()=>{if(confirm("Are you sure you want to disconnect Instagram?")){i(!0);try{await _.api.post("/instagram/disconnect"),n(!1),m(""),t&&t(!1)}catch(e){console.error("Failed to disconnect Instagram:",e),alert("Failed to disconnect. Please try again.")}finally{i(!1)}}};return l?(0,a.jsxs)("div",{className:"flex items-center justify-center p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsx)(I.A,{className:"w-5 h-5 text-purple-600 animate-spin"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Checking Instagram connection..."})]}):s?(0,a.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)(F.A,{className:"w-6 h-6 text-purple-700"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"font-semibold text-purple-900",children:"Instagram Connected"}),(0,a.jsx)(R.A,{className:"w-4 h-4 text-purple-600"})]}),(0,a.jsxs)("p",{className:"text-sm text-purple-700",children:["@",d]}),null!==x&&(0,a.jsxs)("p",{className:"text-xs text-purple-600 mt-1",children:[x.toLocaleString()," followers"]})]})]}),(0,a.jsx)("button",{onClick:p,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium",children:"Disconnect"})]})}):(0,a.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:(0,a.jsx)(F.A,{className:"w-6 h-6 text-gray-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:"Instagram"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Not connected"})]})]}),(0,a.jsxs)("button",{onClick:g,disabled:c,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium transition-all flex items-center gap-2",children:[c?(0,a.jsx)(I.A,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(F.A,{className:"w-4 h-4"}),c?"Connecting...":"Connect Instagram"]})]})})}var P=s(20685),z=s(9548);function V(){var e,t,c,o,d,m;let[x,h]=(0,r.useState)(null),[g,p]=(0,r.useState)(!0),[b,f]=(0,r.useState)(!1),[y,j]=(0,r.useState)(null),[N,v]=(0,r.useState)(!1),[w,S]=(0,r.useState)(null),I=(0,n.useRouter)(),R=(0,n.useSearchParams)(),E=(0,l.U)();(0,r.useEffect)(()=>{(async()=>{let{data:{user:e}}=await E.auth.getUser();e?(h(e),p(!1)):I.push("/login")})()},[I,E]),(0,r.useEffect)(()=>{if(!x)return;let e=R.get("youtube"),t=R.get("instagram"),s=R.get("error");"connected"===e?(S({type:"success",message:"YouTube connected successfully!"}),f(!0),_(),setTimeout(()=>S(null),5e3)):"connected"===t?(S({type:"success",message:"Instagram connected successfully!"}),setTimeout(()=>S(null),5e3)):s&&(S({type:"error",message:"Authentication failed. Please try again."}),setTimeout(()=>S(null),5e3))},[x,R]),(0,r.useEffect)(()=>{x&&b&&_()},[x,b]);let _=async()=>{if(x){v(!0);try{let{api:e}=await Promise.resolve().then(s.bind(s,69973)),t=await e.get("/youtube/stats");t.connected&&t.channel?(j(t),f(!0)):j(null)}catch(e){console.error("Failed to fetch YouTube data:",e),j(null)}finally{v(!1)}}};return g?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-dark-600",children:"Loading your dashboard..."})]})}):(0,a.jsx)(i.A,{children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-8 space-y-8",children:[w&&(0,a.jsxs)("div",{className:"p-4 rounded-xl flex items-center gap-3 animate-slide-up ".concat("success"===w.type?"bg-green-50 border border-green-100 text-green-800":"bg-red-50 border border-red-100 text-red-800"),children:["success"===w.type?(0,a.jsx)(P.A,{className:"w-5 h-5"}):(0,a.jsx)(z.A,{className:"w-5 h-5"}),(0,a.jsx)("p",{className:"font-medium",children:w.message})]}),(0,a.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold text-dark-800 flex items-center gap-2",children:["Welcome back, ",(null==x||null==(t=x.user_metadata)||null==(e=t.full_name)?void 0:e.split(" ")[0])||"Creator","! ",(0,a.jsx)(A.A,{className:"w-8 h-8 text-primary-500"})]}),(0,a.jsx)("p",{className:"text-dark-600 mt-1",children:"Here's your performance overview for this week"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(D,{onConnectionChange:e=>{f(e),e?_():j(null)}}),(0,a.jsx)(L,{})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,a.jsx)(u,{stats:(null==y?void 0:y.channel)?{subscribers:y.channel.subscriberCount,totalViews:y.channel.totalViews,monthlyRevenue:y.revenue||0,engagementRate:null!=(d=null==(c=y.analytics)?void 0:c.avgEngagementRate)?d:0}:{subscribers:0,totalViews:0,monthlyRevenue:0,engagementRate:0}}),(0,a.jsx)(k,{userId:x.id,platform:"all",days:30})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(C,{analytics:(null==y?void 0:y.channel)?{subscribers:y.channel.subscriberCount,views:y.channel.totalViews,engagement:null!=(m=null==(o=y.analytics)?void 0:o.avgEngagementRate)?m:0,revenue:y.revenue||0}:{subscribers:0,views:0,engagement:0,revenue:0}}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-md border border-gray-100",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-dark-800 mb-6",children:"Recent Videos"}),(0,a.jsx)("div",{className:"space-y-4",children:((null==y?void 0:y.recentVideos)||[]).slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex gap-4 group cursor-pointer",children:[(0,a.jsx)("div",{className:"w-24 h-14 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:(0,a.jsx)("img",{src:e.thumbnail||"https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=200&h=120&fit=crop",alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-xs font-bold text-dark-800 truncate leading-tight mb-1 group-hover:text-primary-600 transition-colors",children:e.title}),(0,a.jsx)("div",{className:"flex items-center gap-3 text-[10px] text-dark-500",children:(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(T.A,{className:"w-3 h-3"})," ",(parseInt(e.views)||0).toLocaleString()," views"]})})]})]},e.id))}),(0,a.jsx)("button",{className:"w-full mt-6 py-2 border border-gray-100 rounded-lg text-sm font-semibold text-dark-600 hover:bg-gray-50 transition-colors",children:"View Content Library"})]})]})]})]})})}},63964:(e,t,s)=>{Promise.resolve().then(s.bind(s,33214))},69973:(e,t,s)=>{"use strict";s.d(t,{api:()=>l});var a=s(27895);async function r(){let e=(0,a.U)(),{data:{session:t}}=await e.auth.getSession();return(null==t?void 0:t.access_token)||null}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=await r(),a="".concat("https://creatoriq-axxp.onrender.com").concat(e),n={"Content-Type":"application/json",...t.headers||{}};s&&(n.Authorization="Bearer ".concat(s));let l=await fetch(a,{...t,headers:n});if(!l.ok)throw Error((await l.json().catch(()=>({error:"Request failed"}))).error||"HTTP ".concat(l.status));return l.json()}let l={get:(e,t)=>n(e,{...t,method:"GET"}),post:(e,t,s)=>n(e,{...s,method:"POST",body:t?JSON.stringify(t):void 0}),put:(e,t,s)=>n(e,{...s,method:"PUT",body:t?JSON.stringify(t):void 0}),patch:(e,t,s)=>n(e,{...s,method:"PATCH",body:t?JSON.stringify(t):void 0}),delete:(e,t)=>n(e,{...t,method:"DELETE"})}}},e=>{e.O(0,[864,693,985,570,426,358],()=>e(e.s=63964)),_N_E=e.O()}]);